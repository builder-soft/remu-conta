use remcon;

CREATE TABLE IF NOT EXISTS tBranch(
	cId					BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cName				VARCHAR(50),
	cEnterprise			BIGINT,
	cAddress			VARCHAR(100),
	cComuna				BIGINT,
	cPhone				VARCHAR(15)
) ENGINE=innoDB;

/**
Ejemplo de archivo a cargar
RUT       FechaHora como Long
128706682-12345678901234567890.docx

C:\archivos\	-> Configuracion
           \1	-> (id de categoria) Categoria Curriculums
           \2	-> Fotos
           	 \128706682-12345678901234567890.png -> Foto carnet del empleado 12870668-2

*/
CREATE TABLE IF NOT EXISTS tFile (
	cId				BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cEmployee		BIGINT  NOT NULL,
	cDesc			VARCHAR(100) COMMENT 'Descripcion que ingresa el usuario',
    cFileName		VARCHAR(40) NOT NULL COMMENT 'Nombre del archivo que se subio, ej. foto-01.jpg',
    cFileRealName	VARCHAR(50) NOT NULL COMMENT 'Archivo en el disco 128706682-12345678901234567890.png',
    cSize			BIGINT NOT NULL COMMENT 'Tamaño del archivo',
    cFileCategory	BIGINT,
    cDateTime		DATETIME
) ENGINE=innoDB;

/*
Categoria de archivo.
*/
CREATE TABLE IF NOT EXISTS tFileCategory (
	cId				BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cName			VARCHAR(100) NOT NULL
) ENGINE=innoDB;

CREATE TABLE tParameter (
  cId			BIGINT PRIMARY KEY UNIQUE AUTO_INCREMENT,
  cKey 			VARCHAR(20) NOT NULL,
  cLabel		VARCHAR(100) NOT NULL,
  cValue		Varchar(100) NOT NULL,
  cDataType		BIGINT NOT NULL
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS tRol (
	cId			BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cName		VARCHAR(50) NULL ,
	cDeleted	BIT NOT NULL DEFAULT 0
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tR_UserRol (
	cUser 		BIGINT NOT NULL,
	cRol		BIGINT NOT NULL,
	PRIMARY KEY(cUser,cRol)
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tOption (
	cId			BIGINT  NOT NULL AUTO_INCREMENT,
	cKey		VARCHAR(20) NOT NULL UNIQUE,
	cLabel 		VARCHAR(50) NOT NULL,
	cUrl		VARCHAR(100) NULL,
	cParent		BIGINT NULL,
	cType		BIGINT NOT NULL DEFAULT '1',
	PRIMARY KEY(cId)
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tR_RolOption (
	cRol		BIGINT NOT NULL,
	cOption		BIGINT NOT NULL,
	PRIMARY KEY(cRol, cOption)
) ENGINE=innoDB;

CREATE TABLE tComuna (
	cId			BIGINT UNIQUE AUTO_INCREMENT,
	cName		VARCHAR(50) NOT NULL,
	cRegion		INTEGER NOT NULL,
	cPrioridad	INTEGER NOT NULL DEFAULT '0',
	PRIMARY KEY(cId)  
) ENGINE=InnoDB;

/*
CREATE TABLE tBoard (
	cId BIGINT UNIQUE AUTO_INCREMENT,
	cType VARCHAR(15) NOT NULL,
	cKey VARCHAR(15)  NOT NULL DEFAULT '',
	cValue Varchar(200) NOT NULL,
	cEnable BIT NOT NULL DEFAULT 1,
	PRIMARY KEY(cId),
	UNIQUE TypeAndKey (cType, cKey)
) ENGINE=InnoDB;
*/

CREATE TABLE tBank (
	cId BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(5) NOT NULL, 
	cName	VARCHAR(35) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tCurrency (
	cId BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(3) NOT NULL, 
	cName	VARCHAR(20) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tDataType (
	cId		BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(10) NOT NULL, 
	cName	VARCHAR(20) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tAPV (
	cId		BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(3) NOT NULL,
	cName	VARCHAR(80) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tExBoxSystem (
	cId		BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(4) NOT NULL,
	cName	VARCHAR(50) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tMaritalStatus (
	cId BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(10) NOT NULL,
	cName	VARCHAR(15) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tMutual (
	cId		BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(2) NOT NULL,
	cName	VARCHAR(70) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tAccountType (
	cId		BIGINT UNIQUE AUTO_INCREMENT,
	cKey	VARCHAR(10)  NOT NULL, 
	cName	VARCHAR(20) NOT NULL,
	PRIMARY KEY(cId)
) ENGINE=InnoDB;

CREATE TABLE tCountry (
 	cId			BIGINT UNIQUE AUTO_INCREMENT,
 	cCode		CHAR(3) NOT NULL DEFAULT '' UNIQUE,
 	cName		VARCHAR(60) NOT NULL DEFAULT '',
	PRIMARY KEY(cId)
) ENGINE=InnoDB;
 
 /* Crea tabla Empleados */
create table tEmployee (
	cId					BIGINT(20)  NOT NULL auto_increment, 
	cRut				VARCHAR(11) NOT NULL unique,
	cName				VARCHAR(20) NOT NULL,
	cLastName1			VARCHAR(20) NOT NULL,
	cLastName2			VARCHAR(20) NOT NULL,
	cBirthDate			DATE COMMENT 'Fecha de nacimiento',
	cAddress			VARCHAR(100) COMMENT 'Direccion particular',
	cGenere				BIGINT(20) NOT NULL COMMENT 'Genero Femenino o Masculino',
	cComuna				BIGINT(20) NOT NULL,
	cCountry			BIGINT(20) NOT NULL COMMENT 'Nacionalidad',
	cPhone				VARCHAR(10),
	cMaritalStatus		BIGINT(20) NOT NULL COMMENT 'Estado Civil',
	cMovil				VARCHAR(10),
	cEmail				VARCHAR(50),
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tGenere(
	cId 				BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;


create table tAgreement(
	cId					BIGINT(20) NOT NULL auto_increment, 
	cEmployee			BIGINT(20) NOT NULL UNIQUE	COMMENT 'Id del empleado',
	cContractType		BIGINT(20) NOT NULL 	COMMENT 'Tipo de contrato: fijo o indefinido',
	cStartContract		DATE NOT NULL 			COMMENT 'Inicio de contrato',
	cEndContract		DATE NULL 				COMMENT 'Fin de contrato',
	cProfile			BIGINT(20) NOT NULL 	COMMENT 'Cargo de la persona',
	cSalaryRoot			DOUBLE NOT NULL DEFAULT '1' COMMENT 'Sueldo Base',
	cPFM				BIGINT(20) NOT NULL		COMMENT 'AFP',
	cHealth				BIGINT(20) NOT NULL		COMMENT 'Sistema de salud, isapre o fonasa',
	cGratificationType	BIGINT(20) NOT NULL 	COMMENT 'Tipo de gratificacion',
	cPaymentType		BIGINT(20) NOT NULL 	COMMENT 'Tipo de pago',
	
	cBank				BIGINT(20) NULL 		COMMENT 'Banco para efectos de pago de sueldo',
	cAccountType		BIGINT(20) NULL 		COMMENT 'Tipo de cuenta a la cual se hará el deposito',
	cAccountNumber		NVARCHAR(20) NULL		COMMENT 'Número de la cuenta a la cual se le hará el deposito',
	
	cCurrencyAccount2	BIGINT(20) NULL 		COMMENT 'Moneda de la cuenta 2',
	cAmountAccount2		DOUBLE NULL DEFAULT '0' COMMENT 'Monto de la cuenta 2',
	
	cHorary				BIGINT(20) NOT NULL 	COMMENT 'Tipo de jornada, full-time o part-time (tHorary)',
	cMobilization		DOUBLE DEFAULT '0'		COMMENT 'Movilizacion',
	cFeeding			DOUBLE DEFAULT '0'		COMMENT 'Alimentacion',
	cExBoxSystem		BIGINT(20) NULL			COMMENT 'Caja Ex-Regimen',
	cExBoxSystemPRC		DOUBLE NULL				COMMENT 'Porcentaje de Caja Ex-Regimen (esto debiera ir a otra tabla al parecer)',
	
	cAdditionalHealthAmount	DOUBLE NOT NULL DEFAULT '0'	COMMENT 'Monto adicional sistema de salud',
	cAdditionalHealthCurrency	BIGINT(20) NULL	COMMENT 'Moneda en el cual se expresa el adicional de salud',
	
	cSimpleLoads		INTEGER	NOT NULL DEFAULT '0' 	COMMENT 'Cargas Simples',
	cDisabilityBurdens	INTEGER	NOT NULL DEFAULT '0' 	COMMENT 'Cargas Invalidez',
	cMaternalLoads		INTEGER	NOT NULL DEFAULT '0' 	COMMENT 'Cargas Maternales',
	
	cFamilyAssignmentStretch	BIGINT(20) NOT NULL  COMMENT 'Tramo de asignación familiar',
	PRIMARY KEY (cId)
)ENGINE=InnoDB;

create table tFamilyAssignmentStretch(
	cId					BIGINT(20)  NOT NULL auto_increment,
	cKey				CHAR(1) NOT NULL DEFAULT ' ' COMMENT 'Tramo de asignación familiar',
	cAmount				DOUBLE COMMENT 'Monto a considerar por cada una de las cargas',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tFamilyAssignmentStretchHistory(
	cId					BIGINT(20) NOT NULL auto_increment,
	cPeriod				BIGINT(20) NOT NULL COMMENT 'Codigo del período',
	cKey				CHAR(1) NOT NULL DEFAULT ' ' COMMENT 'Tramo de asignación familiar',
	cAmount				DOUBLE COMMENT 'Monto a considerar por cada una de las cargas',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;


create table tEnterprise (
	cId					BIGINT(20)  NOT NULL auto_increment, 
	cRut				VARCHAR(11) NOT NULL UNIQUE,
	cName				VARCHAR(30) NOT NULL  COMMENT 'Nombre o razon social',
	cLegalRep			VARCHAR(50) NOT NULL  COMMENT 'Representante legal',
	cRutLegalRep		VARCHAR(11) NOT NULL  COMMENT 'Rut del representante legal',
	cCategory			VARCHAR(50)  COMMENT 'Giro o Rubro',
	cAddress			VARCHAR(100),
	cComuna				BIGINT(20) NOT NULL,
	cPhone				VARCHAR(10),
	cMutual				BIGINT(20) NOT NULL,
	cMutualFactor		DOUBLE COMMENT 'Factor de Mutual, varía de empresa en empresa',
	cCompensationFund	BIGINT(20) NOT NULL COMMENT 'Caja de compensacion',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tCompensationFund(
	cId 				BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

CREATE  TABLE IF NOT EXISTS `remcon`.`tEnterpriseConfig` (
   `cId` INT NOT NULL AUTO_INCREMENT ,
   `cEnterprise` BIGINT(20) NOT NULL DEFAULT 1 COMMENT 'Referencia a la tabla tEnterprise' ,
   `cShowDateUfUtm` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Fecha, UF y UTM' ,
   `cShowProfile` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Cargo' ,
   `cShowCostCenter` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Centro de Costos' ,
   `cShowDataAgreement` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Datos del Contrato' ,
   `cShowSalaryRoot` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Renta Base' ,
   `cShowEmployerBonus` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Aportes del Empleador' ,
   `cShowWorkDay` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Días Trabajados' ,
   `cShowNetPaymentScope` BIT NOT NULL DEFAULT 1 COMMENT 'Mostrar Alcance Líquido' ,  
   PRIMARY KEY (`cId`)
)ENGINE = InnoDB;

create table tCostCenter(
	cId 				BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(20) NOT NULL,
	cBranch				BIGINT(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tContractType(
	cId 						BIGINT(20) NOT NULL auto_increment, 
	cName						VARCHAR(20) NOT NULL,
	cInsuranceFactorEmployee	DOUBLE NOT NULL DEFAULT '0' COMMENT 'Factor que aporta el empleado por seguro de cesantía',
	cInsuranceFactorEnterprise	DOUBLE NOT NULL DEFAULT '0' COMMENT 'Factor que aporta la empresa',
	cBody						LONGTEXT,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tPaymentType(
	cId 				BIGINT(20) NOT NULL auto_increment,
	cKey				VARCHAR(15) NOT NULL,
	cName				VARCHAR(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS tR_AgreementAPV (
	cAgreement 		BIGINT NOT NULL COMMENT 'Id del contrato',
	cAPV			BIGINT NOT NULL COMMENT 'Id del apv',
	cCurrency		BIGINT NOT NULL COMMENT 'Moneda en la que se deposita el apv',
	cAmount			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto a ahorrar en apv',
	PRIMARY KEY(cAgreement,cAPV,cCurrency)
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tR_AgreementAPVHistory (
	cPeriod 		BIGINT NOT NULL COMMENT 'Id del período',
	cAgreement 		BIGINT NOT NULL COMMENT 'Id del contrato',
	cAPV			BIGINT NOT NULL COMMENT 'Id del apv',
	cCurrency		BIGINT NOT NULL COMMENT 'Moneda en la que se deposita el apv',
	cAmount			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto a ahorrar en apv',
	PRIMARY KEY(cPeriod,cAgreement,cAPV,cCurrency)
) ENGINE=innoDB;

create table tProfile (
	cId					BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(20) NOT NULL,
	cCostCenter			BIGINT(20) NOT NULL,
	cCompanyCost		DOUBLE NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/*
Administadora de fondos de pension(AFP), en ingles se escribe como "Pension Fund Manager" (PFM), 
de aqui el nombre de la tabla. 
*/
create table tPFM(
	cId				BIGINT(20) NOT NULL auto_increment, 
	cKey			VARCHAR(2) NOT NULL,
	cName			VARCHAR(50) NOT NULL,
	cFactor			DOUBLE NOT NULL,
	cSIS			DOUBLE NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tPFMHistory(
	cId				BIGINT(20) NOT NULL auto_increment,
	cPeriod			BIGINT(20) NOT NULL,
	cKey			VARCHAR(2) NOT NULL,
	cName			VARCHAR(50) NOT NULL,
	cFactor			DOUBLE NOT NULL,
	cSIS			DOUBLE NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tHealth (
	cId				BIGINT(20) NOT NULL auto_increment,
	cKey			VARCHAR(2) NOT NULL,	
	cName			VARCHAR(50) NOT NULL,
	cFactor			DOUBLE NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tHealthHistory(
	cId				BIGINT(20) NOT NULL auto_increment,
	cPeriod			BIGINT(20) NOT NULL,
	cKey			VARCHAR(2) NOT NULL,	
	cName			VARCHAR(50) NOT NULL,
	cFactor			DOUBLE NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/*
En esta tabla se graban para cada Employee:
	- Los APV
	- La cuenta2
	- El adicional de salud (son 3: CLP, UF y/o %).
create table tAccount (
	cId				BIGINT(20) NOT NULL auto_increment,
	cEmployee		BIGINT(20) NOT NULL, 
	cInstitution	BIGINT(20) NOT NULL,
	cAccountType	BIGINT(20) NOT NULL,
	cNumber			VARCHAR(15),
	cCurrency		BIGINT(20) NOT NULL,
	cAmount			DOUBLE,	
	PRIMARY KEY (cId)
) ENGINE=InnoDB;
*/

create table tGratificationType(
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(50) NOT NULL,
	cPolynomial	VARCHAR(200) NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tHorary(
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(50) NOT NULL,
	cDetail		VARCHAR(500) NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/*
create table tMonthlyParameter(
	cId					BIGINT(20) NOT NULL auto_increment,
	cDate				DATE 	NOT NULL,
	cUF					DOUBLE	NOT NULL,
	cOvertimeFactor		DOUBLE COMMENT 'Para calcular las horas extras, puede ser 0.07777 o 0.0333',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;
*/

/*
Tabla para registrar las horas extras del empleado.
*/
create table tOvertime(
	cId					BIGINT(20) NOT NULL auto_increment,
	cEmployee			BIGINT(20) NOT NULL COMMENT 'Identificador del empleado quien tiene las horas extras',
	cPeriod				BIGINT(20) NOT NULL COMMENT 'Id del período para el cual se registran las horas',
	cDate				DATE NOT NULL COMMENT 'Fecha en la cual se registran las horas',
	cHours				INTEGER NOT NULL DEFAULT '1' COMMENT 'Cantidad de horas extras trabajadas',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tFiscalDate(
	cId			BIGINT(20) NOT NULL auto_increment,
	cDate		DATE NOT NULL UNIQUE,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/*
La tabla tPeriodStatus es para indicar si el período está cerrado o abierto, si está cerrado, no se 
pueden cambiar los valores de la tabla.
*/
create table tPeriodStatus(
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(50) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/* Esta tabla tiene los tramos de los Impuestos únicos */ 
create table tUniqueTax(
	cId			BIGINT(20) NOT NULL auto_increment,
	cPeriod		BIGINT(20) NOT NULL COMMENT 'Enlace con la tabla tPeriod - 01/Mes/Año',
	cKey		VARCHAR(1) NOT NULL,
	cLimit		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Limite superior del tramo, se multiplica con UTM, Ej. 30xUTM',
	cFactor		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Factor de descuento',
	cDiscount	DOUBLE NOT NULL DEFAULT '0' COMMENT 'Factor de rebaja que se multiplica por la UTM, Ej. 0,675 x UTM',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/**
La tabla tPeriod sirve para identificar los períodos para los cuales existe cálculo, y 
los parámetros que aplican en forma general.
*/
create table tPeriod(
	cId							BIGINT(20) NOT NULL auto_increment,
	cDate						DATE NOT NULL COMMENT 'Siempre es el día 1 del mes',
	cPeriodStatus				BIGINT(20) NOT NULL DEFAULT '1' COMMENT 'Mirar tabla tPeriodStatus',
	cUF							DOUBLE NOT NULL COMMENT 'Valor de la UF para el período',
	cOvertimeFactor				DOUBLE NOT NULL COMMENT 'Para calcular las horas extras, puede ser 0.07777 o 0.0333',
	cMinSalary					DOUBLE NOT NULL COMMENT 'Ingreso Mínimo Mensual', 
	cLimitGratification			DOUBLE NOT NULL COMMENT 'Limite gratificacion - 4.75 Ingresos mínimos',
	cGratificationFactor		DOUBLE NOT NULL COMMENT 'Factor de cálculo de gratificacion',
	cLimitIPS					DOUBLE NOT NULL COMMENT 'Tope imponible para afiliados al IPS (ex INP) en UFs',
	cLimitInsurance				DOUBLE NOT NULL COMMENT 'Tope de seguro de cesantia',
	cLimitHealth				DOUBLE NOT NULL COMMENT 'Tope de salud, expresado en UF',
	
	/*
	cInsuranceFactorEmployee	DOUBLE NOT NULL COMMENT 'Factor que se aplica al empleado por seguro de sesantía',
	cInsuranceFactorEnterprise	DOUBLE NOT NULL COMMENT 'Factor para empresa, por seguro de cesantía',
	*/
	
	cUTM						DOUBLE NOT NULL COMMENT 'Valor de una UTM',
	cDaysForYear				INTEGER NOT NULL DEFAULT '15' COMMENT 'Días de vacaciones por año trabajado',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/*
Esta tabla tiene todos los empleados agrupados por período.
*/
create table tBook(
	cId					BIGINT(20) NOT NULL auto_increment,
	cPeriod				BIGINT(20) NOT NULL COMMENT 'Enlace con la tabla tPeriod - 01/Mes/Año',
	cEmployee			BIGINT(20) NOT NULL COMMENT 'Empleado - tEmployee.cId',
	cHorary				BIGINT(20) NOT NULL COMMENT 'Tipo de jornada: part-time / full-time - tAgreement.cHoray',
	cWorkDays			INTEGER NOT NULL DEFAULT '30' COMMENT 'Días trabajados - Ingresa por el período',
	cSalaryRoot			DOUBLE NOT NULL COMMENT 'Sueldo Base - cp from tAgreement.cSalaryRoot',
	cOvertime			INTEGER	NOT NULL DEFAULT '0' COMMENT 'Cantidad Horas Extras - Sumar tabla tOvertime',
	cSalaryReceived		DOUBLE NULL DEFAULT '0' COMMENT 'Salario recibido - calculo de sueldo_base/30 x días trabajados',
	cInsuranceFactorEmployee	DOUBLE NOT NULL COMMENT 'Factor con el que aporta el empleado para seguro de cesantía',
	cInsuranceFactorEnterprise	DOUBLE NOT NULL COMMENT 'Factor con el que aporta la empresa para seguro de cesantía',
	cContractType		BIGINT(20) NOT NULL COMMENT 'Tipo de contrato, define el tipo de seguro de cesantia',
	cNetPaymentScope	DOUBLE NULL DEFAULT '0' COMMENT 'Alcance líquido',
	cToPayEmployee		DOUBLE NULL DEFAULT '0' COMMENT 'Líquido a Pagar al empleado',
	cInsuranceAmountEnterprise	DOUBLE NULL DEFAULT '0' COMMENT 'Monto que cancela el empleador por cesantía',
	cMutualFactor			DOUBLE NULL DEFAULT '0' COMMENT 'Facor de lo que la empresa le paga a la Mutual',
	cPayToMutulEnterprise	DOUBLE NULL DEFAULT '0' COMMENT 'Monto que la empresa debe pagar a la mutual correspondiente',
	cFamilyAssignmentEnterprise	DOUBLE NULL DEFAULT '0' COMMENT 'Monto que la empresa debe pagar por concepto de cargas familiares',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/*
Tabla del libro con los Haberes
*/
create table tBookAssets(
	cId							BIGINT(20) NOT NULL auto_increment,
	cBook						BIGINT(20) NOT NULL,
	cGratificationType			BIGINT(20) NOT NULL COMMENT 'Tipo de Gratificación - cp from tAgreement.cGratificationType',
	cGratificationAmount		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto de la gratificación',
	cRewardAmount				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto Gratificacion - Basado en cGratificationType, buscar el que le corresponde(%, monto o 0)',
/*
Tramo SE INGRESA A MANO LA LETRA "A,B,C,D" ya que es la caja de compensacion la que determina el tramo al que pertenece 
el trabajor, No se calcula
*/
	cOvertimeAmount				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto ganado por horas extras - se calcula',
	cParticipation				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Aplica cuando tiene participacion en empresa - Ingreso por período',
	cB01						DOUBLE NOT NULL DEFAULT '0' COMMENT 'Bono 1 - Se ingresa por período, o copiar del mes anterior',
	cB02						DOUBLE NOT NULL DEFAULT '0',
	cB03						DOUBLE NOT NULL DEFAULT '0',
	cB04						DOUBLE NOT NULL DEFAULT '0',
	cB05						DOUBLE NOT NULL DEFAULT '0',
	cB06						DOUBLE NOT NULL DEFAULT '0',
	cB07						DOUBLE NOT NULL DEFAULT '0',
	cB08						DOUBLE NOT NULL DEFAULT '0',
	cB09						DOUBLE NOT NULL DEFAULT '0',
	cB10						DOUBLE NOT NULL DEFAULT '0',
	cExtraPay					DOUBLE NOT NULL DEFAULT '0' COMMENT 'Aguinaldo - Se ingresa por período',
	cTotalIncomeTaxable			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Total Haberes Imponibles - suma de bonos, gratificacion y sueldo ganado',
	cIncome						DOUBLE NOT NULL DEFAULT '0' COMMENT 'Renta afecta',
	
	cFamilyAssignmentStretch	CHAR(1)	NOT NULL DEFAULT ' ' COMMENT 'Tramo Asignacion Familiar - Se ingresa por empleado, [A/B/C/D]',
	cFamilyAssignmentCount		INTEGER NOT NULL DEFAULT '0' COMMENT 'Cargas Familiares - tAgreement.CAMPO_NUEVO',
	cFamilyAssignmentAmount 	DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto Por Cargas - Calcular',
	cFamilyRetroactive			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Retroactivo Familiar, esto se asigna mes a mes',
	
	cFeeding					DOUBLE NOT NULL DEFAULT '0' COMMENT 'Colación - Se ingresa por período',
	cMobilization				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Movilización - Se ingresa por período',
	cBounty               		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Viaticos - Se ingresa por período',
	cMonthNotification			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Mes De Aviso - Se ingresa por período',
	cIAS 						DOUBLE NOT NULL DEFAULT '0' COMMENT 'Indemnisacion años de servicio - Se ingresa por período',
	cProportionalHoliday		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Feriado Proporcional - Se calcula',
	cTotalIncomeNotTaxable		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Total haberes no imponibles',
	cTotalIncome				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Total haberes',
	
/*
	Formula: (Meses Trabajados/30) * 1.75 * Imponible - Horas Extras - Gratificacion
	este valor se GUARDA y NO SE MUESTRA EN LA LIQUIDACION EMPRESA pero si
	se contabilizará en una cuenta contable
*/
	cVoluntaryIndenmization		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Indemnisacion Voluntaira - Se ingresa por período',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;


/*************************************
Tabla de libro con descuentos.
============================== 
hay 2 seguros
S.I.S. = es un % (1.87) lo entrega el previred es de costo del trabajador, se paga a la AFP (parametro del mes)
Seguro de Invalidez de la Mutual
Es un % que fija la mutual en base al indice de siniestralidad, lo paga el empleador a la mutual, (parametro mensual x cada mutual), 
nota este parametro no cambia todos los meses. No se imprime en la liquidacion pero se contabiliza como parte del costo empresa.
*/
create table tBookDiscounts(
	cId								BIGINT(20) NOT NULL auto_increment,
	cBook							BIGINT(20) NOT NULL,
	cPFMHistory						BIGINT(20) NOT NULL COMMENT 'Código de AFP',
	cObligatoryQuote				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Cotizacion Obligatoria - Es un % multiplicado por el cLimitTaxableForecast',
	cAPVAmount						DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto APV - Suma de todos los montos en APV, algunos traducir a pesos desde UF',
	cAccount2						DOUBLE NOT NULL DEFAULT '0' COMMENT 'Cuenta 2, Ahorro AFP - Se saca de la tabla tAccount',
	cLimitTaxableForecast			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Tope Imponible Previsional - Parámetro del mes, 60 UFs',
	cLimitTaxableDismissInsurance	DOUBLE NOT NULL DEFAULT '0' COMMENT 'Tope Imponible Seguro Cesantia - Parámetro del mes, es un valor fijo',
	
	cHealthHistory					BIGINT(20) NOT NULL COMMENT 'Codigo de sistema de salud - Es la Isapre o fonasa',
	cLawfulQuote					DOUBLE NOT NULL DEFAULT '0' COMMENT 'Cotización Legar - Es el 7% del imponible, el valor es calculado',
	cAdditionalHealthCurrency		BIGINT(20) NULL COMMENT 'Moneda del plan complementario de salud - UF o CLP',
	cAdditionalHealthAmount			DOUBLE NULL DEFAULT '0' COMMENT 'Monto pactado de salud complementario',
	cAdditionalHealthCLP			DOUBLE NULL DEFAULT '0' COMMENT 'Monto complementario de saludo, siempre en pesos',
	cHealthQuote					DOUBLE NOT NULL DEFAULT '0' COMMENT 'Cotizacion de salud, corresponde al valor final que paga por salud',
	/*
	cLimitExtraHealth				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Tope de la cotización de salud',
	*/
/*
Cotizacion Salud Rebaja
Tope 4.2 UF (parametro puede variar)
Sí, la cotización adicional de salud, superior al 7%, aplicada a una renta imponible de 67,4 UF a contar de enero 2012, es 
tributable para los efectos del Impuesto Único, pues permite rebajar por concepto de cotización de salud hasta 4,72UF 
(67,4 UF por 7%).
Si alguien tiene un plan muy caro de salud debe tributar como impuesto unico a la renta el excedente.
*/
/*
	cCotisacionSaludRebaja			COMMENT 'Preguntar que es',
*/
	
/*
 	Este campo se reemplaza por el código del contrato.
	cUnemploymentInsurance			BIGINT(20) NULL COMMENT 'Código de seguro de sesantia - Sin seguro, contrato indefinido o a plazo',
*/	
/*
Seguro Cesantia
Hay 3 tipos:
 1.Sin seguro
 2.Contrato a Plazo = el empleador cancela el 3% del imponible como seguro de sesantia
 3.Contrato indefinido = el empleador cubre un 2.4% y el 0.6% lo cancela el trabajador (descuento)
La columna en el libro de remuneraciones se llama Aporte Patronal se contabiliza y no se imprime en la liquidacion, salvo el 0.6% cuando corresponde (es costo empresa).

Ojo tiene tope en UF ese tope lo da el previred y puede cambiar en el año el 3% (2.4 + 0.6) es ley y tambien podria cambiar por tanto dejar como parametro del mes (obvio).
 
*/
	cUnemploymentInsuranceAmount	DOUBLE NOT NULL DEFAULT '0' COMMENT 'Monto Seguro Cesantia en pesos',
	cUniqueTax						DOUBLE NOT NULL DEFAULT '0' COMMENT 'Impuesto Unico - es un valor que se calcula', 
	cAdvance						DOUBLE NOT NULL DEFAULT '0' COMMENT 'Anticipo de Sueldo',
/*	
	cAnticipoViatico
*/				
	cLoanEnterprise					DOUBLE NOT NULL DEFAULT '0' COMMENT 'Prestamo de la Empresa', 
	cLoanCompensationFund			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Prestamo Caja Compenzacion', 
	cSavingCompensationFund			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Ahorro Caja Compenzacion', 
	cJudicialRetention				DOUBLE NOT NULL DEFAULT '0' COMMENT 'Retenciones Judiciales',
	cSubtotalLawfulDiscounts		DOUBLE NOT NULL DEFAULT '0' COMMENT 'Sub total de descuentos legales',
	cSubtotalOtherDiscounts			DOUBLE NOT NULL DEFAULT '0' COMMENT 'Sub total de otros descuentos',
	cTotalDiscounts					DOUBLE NOT NULL DEFAULT '0' COMMENT 'Total descuentos',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/****************
EN LA VISTA:
*/



/***************************************/

 /** V I S T A S **/

