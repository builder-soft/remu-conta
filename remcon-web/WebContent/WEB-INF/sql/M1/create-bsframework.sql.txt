USE bsframework;

/**
* http://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx
* 
* http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-type-conversions.html
* Los tipos de datos que vamos a usar...
* MYSQL					Java
* -----------------------------------------------
* BIT					java.lang.Boolean
* INTEGER [UNSIGNED]	java.lang.Integer, if UNSIGNED java.lang.Long
* BIGINT [UNSIGNED]		java.lang.Long, if UNSIGNED java.math.BigInteger
* DOUBLE				java.lang.Double
* DATE					java.sql.Date
* TIMESTAMP				java.sql.Timestamp
* VARCHAR				java.lang.String
* LONGTEXT				java.lang.String
*/

CREATE TABLE IF NOT EXISTS tUser (
	cId			BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cMail 		VARCHAR(50) NOT NULL UNIQUE COMMENT 'Campo con el cual el usuario hace login, ideal es que sea el mail para que no se le olvide',
	cName		VARCHAR(100) NOT NULL COMMENT 'El nombre real del usuario',
	cPassword	VARCHAR(64) COMMENT 'Codificada en md5',
	cAdmin		BIT			NOT NULL DEFAULT 0	COMMENT 'Este campo indica si tiene accedo de administrador, de manera de poder modificar usuarios de todos los dominios'
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tDomain (
	cId			BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cName		VARCHAR(100) NULL,
	cAlias		VARCHAR(15) NULL	
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tR_UserDomain (
	cUser		BIGINT  NOT NULL,
	cDomain		BIGINT  NOT NULL	
) ENGINE=innoDB;


CREATE TABLE IF NOT EXISTS tDomainAttribute (
	cId			BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cDomain		BIGINT  NOT NULL,
	cKey		VARCHAR(20) NULL,
	cName		VARCHAR(20) NULL,
	cValue		VARCHAR(50) NULL
) ENGINE=innoDB;

