use remcon;

CREATE TABLE IF NOT EXISTS tFile (
	cId				BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cDesc			VARCHAR(100),
	cContent		LONGTEXT,
    cFileName		VARCHAR(100) NOT NULL,
    cSize			BIGINT,
    cCategory		BIGINT
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tFileCategory (
	cId				BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cName			VARCHAR(100) NOT NULL,
    cContentType	VARCHAR(100) NOT NULL
) ENGINE=innoDB;

CREATE TABLE `tParameter` (
  `cId` BIGINT PRIMARY KEY UNIQUE AUTO_INCREMENT,
  `cSystem` BIGINT NOT NULL,
  `cKey` 	varchar(20) NOT NULL,
  cLabel	varchar(100) NOT NULL,
  `cValue`	Varchar(100) NOT NULL,
  `cType`	BIGINT NOT NULL
) ENGINE=InnoDB;


CREATE TABLE IF NOT EXISTS tRol (
	cId			BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cName		VARCHAR(50) NULL ,
	cDeleted	BIT NOT NULL DEFAULT 0
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tR_UserRol (
	cUser 		BIGINT NOT NULL,
	cRol		BIGINT NOT NULL
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tOption (
	cId			BIGINT  NOT NULL AUTO_INCREMENT PRIMARY KEY,
	cKey		VARCHAR(20) NOT NULL UNIQUE,
	cLabel 		VARCHAR(50) NOT NULL,
	cUrl		VARCHAR(100) NULL,
	cParent		BIGINT NULL,
	cType		BIGINT NOT NULL DEFAULT '1'
) ENGINE=innoDB;

CREATE TABLE IF NOT EXISTS tR_RolOption (
	cRol		BIGINT NOT NULL,
	cOption		BIGINT NOT NULL
) ENGINE=innoDB;

CREATE TABLE tComuna (
  `cId` BIGINT PRIMARY KEY UNIQUE AUTO_INCREMENT,
  `cName` varchar(50) NOT NULL,
  `cRegion` Integer NOT NULL,
  `cPrioridad` Integer NOT NULL DEFAULT '0'
) ENGINE=InnoDB;

CREATE TABLE `tBoard` (
  `cId` BIGINT PRIMARY KEY UNIQUE AUTO_INCREMENT,
  `cType` varchar(15) NOT NULL,
  `cKey` varchar(10) DEFAULT '',
  `cValue` Varchar(200) NOT NULL,
  cEnable BIT NOT NULL DEFAULT 1
) ENGINE=InnoDB;

CREATE TABLE `tCountry` (
 	cId	 BIGINT PRIMARY KEY UNIQUE AUTO_INCREMENT,
 	cCode char(3) NOT NULL DEFAULT '' UNIQUE,
 	cName varchar(60) NOT NULL DEFAULT ''
 ) ENGINE=InnoDB;
 
 /* Crea tabla Empleados */
create table tEmployee (
	cId				BIGINT(20)  NOT NULL auto_increment, 
	cRut			VARCHAR(11) NOT NULL unique,
	cName			VARCHAR(20) NOT NULL,
	cLastName1		VARCHAR(20) NOT NULL,
	cLastName2		VARCHAR(20) NOT NULL,
	cBirthDate		DATE COMMENT 'Fecha de nacimiento',
	cAddress		VARCHAR(100) COMMENT 'Direccion particular',
	cGenere			BIGINT(20) NOT NULL COMMENT 'Genero Femenino o Masculino',
	cComuna			BIGINT(20) NOT NULL,
	cCountry		BIGINT(20) NOT NULL COMMENT 'Nacionalidad',
	cPhone			VARCHAR(10),
	cMaritalStatus	BIGINT(20) NOT NULL COMMENT 'Estado Civil',
	cMovil			VARCHAR(10),
	cEmail			VARCHAR(50),
	cContractType	BIGINT(20) NOT NULL COMMENT 'Tipo de contrato: fijo o indefinido',
	cStartContract	DATE NOT NULL COMMENT 'Inicio de contrato',
	cEndContract	DATE NULL COMMENT 'Fin de contrato',
	cProfile		BIGINT(20) NOT NULL COMMENT 'Cargo de la persona',
	cAFP			BIGINT(20) NOT NULL,
	cIsapre			BIGINT(20) NOT NULL,
	cGratificationType	BIGINT(20) NOT NULL COMMENT 'Tipo de gratificacion',
	cPaymentType	BIGINT(20) NOT NULL COMMENT 'Tipo de pago',
	cMobilization	DOUBLE COMMENT 'Movilizacion',
	cFeeding		DOUBLE COMMENT 'Alimentacion',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tEnterprise (
	cId					BIGINT(20)  NOT NULL auto_increment, 
	cRut				VARCHAR(11) NOT NULL UNIQUE,
	cName				VARCHAR(30) NOT NULL  COMMENT 'Nombre o razon social',
	cLegalRep			VARCHAR(50) NOT NULL  COMMENT 'Representante legal',
	cRutLegalRep		VARCHAR(11) NOT NULL  COMMENT 'Rut del representante legal',
	cCategory			VARCHAR(50)  COMMENT 'Giro o Rubro',
	cAddress			VARCHAR(100),
	cComuna				BIGINT(20) NOT NULL,
	cPhone				VARCHAR(10),
	cMutual				BIGINT(20) NOT NULL,
	cMutualFactor		DOUBLE COMMENT 'Factor Mutual',
	cCompensationFund	BIGINT(20) NOT NULL COMMENT 'Caja de compensacion',
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tMutual (
	cId					BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(40) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tCompensationFund (
	cId					BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tCostCenter(
	cId 				BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(20) NOT NULL,
	cEnterprise			BIGINT(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tContractType(
	cId 				BIGINT(20) NOT NULL auto_increment, 
	cName				VARCHAR(20) NOT NULL,
	cBody				LONGTEXT,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tProfile (
	cId				BIGINT(20) NOT NULL auto_increment, 
	cName			VARCHAR(20) NOT NULL,
	cCostCenter		BIGINT(20) NOT NULL,
	cCompanyCost	DOUBLE NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tAFP (
	cId				BIGINT(20) NOT NULL auto_increment, 
	cKey			INTEGER	NOT NULL UNIQUE,
	cName			VARCHAR(20) NOT NULL,
	cFactor			DOUBLE NOT NULL,
	cSIS			DOUBLE NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tIsapre (
	cId				BIGINT(20) NOT NULL auto_increment, 
	cKey			INTEGER	NOT NULL UNIQUE,
	cName			VARCHAR(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tAccount (
	cId				BIGINT(20) NOT NULL auto_increment,
	cEmployee		BIGINT(20) NOT NULL, 
	cName			VARCHAR(50) NOT NULL,  
	cTarget			BIGINT(20) NOT NULL,
	cTargetType		BIGINT(20) NOT NULL,
	cNumber			VARCHAR(15) NOT NULL,
	cCurrency		BIGINT(20) NOT NULL,	
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

/**
create table tAccount (
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(50) NOT NULL,  
	cTarget		BIGINT(20) NOT NULL,
	cNumber		VARCHAR(15) NOT NULL,
	cCurrency	BIGINT(20) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;
*/

create table tGratificationType(
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(50) NOT NULL,
	cPolynomial	VARCHAR(200), 
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tPaymentType(
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(15) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tapvinstitution(
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(15) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB;

create table tunidadcuenta(
	cId			BIGINT(20) NOT NULL auto_increment,
	cName		VARCHAR(15) NOT NULL,
	PRIMARY KEY (cId)
) ENGINE=InnoDB; 


/** crea la relacion del empleado con las APV's
CREATE  TABLE temployeeApv (
  cId BIGINT NOT NULL AUTO_INCREMENT ,
  cIdemployee BIGINT NOT NULL ,
  cIdunidad BIGINT NOT NULL ,
  cIdapvInstitution BIGINT NOT NULL ,
  PRIMARY KEY (cId) ,
  INDEX idEmployee (cIdemployee ASC) ,
  INDEX idUnidad (cIdunidad ASC) ,
  INDEX idApvInstitution (cIdapvInstitution ASC) ,
  CONSTRAINT idEmployee
    FOREIGN KEY (cIdemployee )
    REFERENCES temployee (cId )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT idUnidad
    FOREIGN KEY (cIdunidad )
    REFERENCES tunidadcuenta (cId )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT idApvInstitution
    FOREIGN KEY (cIdapvInstitution )
    REFERENCES tapvinstitution (cId )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) ENGINE=InnoDB;

 