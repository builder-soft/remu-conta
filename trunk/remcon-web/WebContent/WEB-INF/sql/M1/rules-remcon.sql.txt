use remcon;

ALTER TABLE tR_RolOption ADD PRIMARY KEY(cRol, cOption);

ALTER TABLE tR_UserRol ADD PRIMARY KEY(cUser,cRol);

DROP VIEW IF EXISTS vSystem;
CREATE VIEW vSystem
AS
SELECT cId, cValue AS cName FROM tBoard WHERE cType='SYSTEM';

DROP VIEW IF EXISTS vType;
CREATE VIEW vType
AS
SELECT cId, cValue AS cName FROM tBoard WHERE cType='TYPE';

DROP VIEW IF EXISTS vTypeOption;
CREATE VIEW vTypeOption
AS
SELECT cId, cValue AS cName FROM tBoard WHERE cType='TYPE_OPTION';

DROP VIEW IF EXISTS vMaritalStatus;
CREATE VIEW vMaritalStatus
AS
SELECT cId, cValue AS cName FROM tBoard WHERE cType='MARITAL_STATUS';

DROP VIEW IF EXISTS vGenere;
CREATE VIEW vGenere
AS
SELECT cId, cValue AS cName FROM remcon.tBoard WHERE cType='GENERE';

DROP VIEW IF EXISTS vCurrency;
CREATE VIEW vCurrency
AS
SELECT cId, cValue AS cName FROM remcon.tBoard WHERE cType='CURRENCY';

/** EMPLOYEE */
ALTER TABLE remcon.tEmployee
ADD INDEX `Employee_index_MaritalStatus` (`cMaritalStatus` ASC),
ADD CONSTRAINT withMaritalStatus FOREIGN KEY (cMaritalStatus) REFERENCES remcon.tBoard(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `Employee_index_Country` (`cCountry` ASC),
ADD CONSTRAINT withCountry       FOREIGN KEY (cCountry) REFERENCES remcon.tCountry(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `Employee_index_Genere` (`cGenere` ASC),
ADD CONSTRAINT withGenere FOREIGN KEY (cGenere) REFERENCES remcon.tBoard(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `comuna_index` (`cComuna` ASC),
ADD CONSTRAINT employeeToComuna FOREIGN KEY (cComuna) REFERENCES remcon.tComuna(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `contractType_index` (`cContractType` ASC),
ADD CONSTRAINT withContractType FOREIGN KEY (cContractType) REFERENCES remcon.tContractType(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `profile_index` (`cProfile` ASC),
ADD CONSTRAINT withProfile FOREIGN KEY (cProfile) REFERENCES remcon.tProfile(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `afp_index` (`cAFP` ASC),
ADD CONSTRAINT withAFP FOREIGN KEY (cAFP) REFERENCES remcon.tAFP(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `isapre_index` (`cIsapre` ASC),
ADD CONSTRAINT withIsapre FOREIGN KEY (cIsapre) REFERENCES remcon.tIsapre(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `gratificationType_index` (`cGratificationType` ASC),
ADD CONSTRAINT withGratificationType FOREIGN KEY (cGratificationType) REFERENCES remcon.tGratificationType(cId);

ALTER TABLE remcon.tEmployee
ADD INDEX `paymentType_index` (`cPaymentType` ASC),
ADD CONSTRAINT withPaymentType FOREIGN KEY (cPaymentType) REFERENCES remcon.tPaymentType(cId);

/** ENTERPRISE */
ALTER TABLE remcon.tEnterprise
ADD INDEX `comuna_index` (`cComuna` ASC),
ADD CONSTRAINT withComuna FOREIGN KEY (cComuna) REFERENCES remcon.tComuna(cId);

ALTER TABLE remcon.tEnterprise
ADD INDEX `mutual_index` (`cMutual` ASC),
ADD CONSTRAINT withMutual FOREIGN KEY (cMutual) REFERENCES remcon.tMutual(cId);

ALTER TABLE remcon.tEnterprise
ADD INDEX `compensationFund_index` (`cCompensationFund` ASC),
ADD CONSTRAINT withCompensationFund FOREIGN KEY (cCompensationFund) REFERENCES remcon.tCompensationFund(cId);

/** COST CENTER */
ALTER TABLE remcon.tCostCenter
ADD INDEX `enterpise_index_costCenter` (`cEnterprise` ASC),
ADD CONSTRAINT withEnterpriseCC FOREIGN KEY (cEnterprise) REFERENCES remcon.tEnterprise(cId);


/** PROFILE */
ALTER TABLE remcon.tProfile
ADD INDEX `costCenter_index` (`cCostCenter` ASC),
ADD CONSTRAINT withCostCenter FOREIGN KEY (cCostCenter) REFERENCES remcon.tCostCenter(cId);

/** ACCOUNT */
ALTER TABLE remcon.tAccount
ADD INDEX `account_index_employee` (`cEmployee` ASC),
ADD CONSTRAINT AccountToEmployee FOREIGN KEY (cEmployee) REFERENCES remcon.tEmployee(cId);

ALTER TABLE remcon.tR_RolOption
ADD INDEX `index_rol` (`cRol` ASC),
ADD INDEX `index_option` (`cOption` ASC),
ADD CONSTRAINT r_RolOptionToRol FOREIGN KEY (cRol) REFERENCES remcon.tRol(cId),
ADD CONSTRAINT r_RolOptionToOption FOREIGN KEY (cOption) REFERENCES remcon.tOption(cId);

ALTER TABLE remcon.tR_UserRol
ADD INDEX `index_rol` (`cRol` ASC),
ADD INDEX `index_user` (`cUser` ASC),
ADD CONSTRAINT r_UserRolToRol FOREIGN KEY (cRol) REFERENCES remcon.tRol(cId);/*,
ADD CONSTRAINT r_RolOptionToOption FOREIGN KEY (cOption) REFERENCES remcon.tOption(cId);*/
